/* ── Inspector WebView Styles ──────────────────────────────────────────
 * Plain CSS using VS Code CSS variables for automatic theme adaptation.
 * No build step required — loaded directly by the WebView.
 * Edit this file and run "DevTools: Refresh Inspector" to see changes.
 * ──────────────────────────────────────────────────────────────────── */

/* ── CSS Variables (fallbacks for standalone / non-VS Code contexts) ── */

:root {
	--inspector-bg: var(--vscode-editor-background, #1e1e1e);
	--inspector-sidebar: var(--vscode-sideBar-background, #252526);
	--inspector-input: var(--vscode-input-background, #3c3c3c);
	--inspector-border: var(--vscode-panel-border, #474747);
	--inspector-text: var(--vscode-foreground, #cccccc);
	--inspector-text-dim: var(--vscode-descriptionForeground, #969696);
	--inspector-accent: var(--vscode-focusBorder, #007acc);
	--inspector-accent-hover: #1177bb;
	--inspector-success: var(--vscode-charts-green, #4ec9b0);
	--inspector-error: var(--vscode-editorError-foreground, #f44747);
	--inspector-warning: var(--vscode-editorWarning-foreground, #cca700);
	--inspector-hover: var(--vscode-list-hoverBackground, #2a2d2e);
	--inspector-selection: var(--vscode-editor-selectionBackground, #264f78);
	--inspector-badge: #4d4d4d;

	--font-mono: var(--vscode-editor-font-family, 'Cascadia Code', 'Fira Code', 'JetBrains Mono', 'Consolas', monospace);
	--font-sans: var(--vscode-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif);
	--font-size: var(--vscode-font-size, 13px);
}

/* ── Reset & Base ────────────────────────────────────────────────────── */

*, *::before, *::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

body {
	font-family: var(--font-sans);
	font-size: var(--font-size);
	line-height: 1.4;
	color: var(--inspector-text);
	background: var(--inspector-bg);
	height: 100vh;
	overflow: hidden;
	-webkit-font-smoothing: antialiased;
}

textarea, pre, code {
	font-family: var(--font-mono);
	font-size: 13px;
}

/* ── Focus ───────────────────────────────────────────────────────────── */

*:focus-visible {
	outline: 1px solid var(--inspector-accent);
	outline-offset: -1px;
}

/* ── Scrollbar (VS Code style) ───────────────────────────────────────── */

::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: rgba(121, 121, 121, 0.4);
	border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
	background: rgba(121, 121, 121, 0.7);
}

/* ── Layout ──────────────────────────────────────────────────────────── */

.app-root {
	display: flex;
	flex-direction: column;
	height: 100%;
}

.selector-area {
	flex-shrink: 0;
	border-bottom: 1px solid var(--inspector-border);
}

.detail-area {
	flex: 1;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

/* ── Tool Selector ───────────────────────────────────────────────────── */

.tool-selector {
	padding: 12px;
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.select-wrapper {
	position: relative;
}

.tool-select {
	width: 100%;
	padding: 4px 32px 4px 10px;
	border-radius: 4px;
	border: 1px solid var(--inspector-border);
	background: var(--inspector-input);
	color: var(--inspector-text);
	font-size: 13px;
	font-family: var(--font-sans);
	cursor: pointer;
	appearance: none;
}

.tool-select:focus {
	border-color: var(--inspector-accent);
	outline: none;
}

.select-chevron {
	pointer-events: none;
	position: absolute;
	right: 8px;
	top: 50%;
	transform: translateY(-50%);
	color: var(--inspector-text-dim);
	font-size: 12px;
}

/* ── Annotation Badges ───────────────────────────────────────────────── */

.badges-row {
	display: none;
	flex-wrap: wrap;
	gap: 4px;
}

.badges-row.visible {
	display: flex;
}

.badge {
	font-size: 10px;
	padding: 2px 6px;
	border-radius: 4px;
}

.badge-success {
	background: rgba(78, 201, 176, 0.2);
	color: var(--inspector-success);
}

.badge-error {
	background: rgba(244, 71, 71, 0.2);
	color: var(--inspector-error);
}

.badge-accent {
	background: rgba(0, 122, 204, 0.2);
	color: var(--inspector-accent);
}

.badge-warning {
	background: rgba(204, 167, 0, 0.2);
	color: var(--inspector-warning);
}

/* ── Empty State ─────────────────────────────────────────────────────── */

.empty-state {
	flex: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--inspector-text-dim);
	text-align: center;
}

.empty-state-title {
	font-size: 16px;
	margin-bottom: 8px;
}

.empty-state-subtitle {
	font-size: 13px;
}

/* ── Tool Detail Panel ───────────────────────────────────────────────── */

.tool-detail-panel {
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	background: var(--inspector-bg);
}

.tool-detail-scroll {
	flex: 1;
	overflow-y: auto;
	padding: 16px;
}

/* ── Tool Invocation Card (VS Code Copilot Chat style) ───────────────── */

.tool-invocation-card {
	border: 1px solid var(--inspector-border);
	border-radius: 4px;
	font-size: 13px;
}

.tool-invocation-card h3 {
	font-weight: 600;
	margin: 4px 0 8px;
	font-size: 12px;
	color: var(--inspector-text-dim);
	user-select: none;
}

.tool-invocation-card.error-state {
	border-color: color-mix(in srgb, var(--inspector-error) 50%, transparent);
}

/* ── I/O Sections ────────────────────────────────────────────────────── */

.tool-io-section {
	padding: 0 8px;
	margin: 8px 0;
}

.tool-io-editor-wrapper {
	border: 1px solid var(--inspector-border);
	border-radius: 4px;
	overflow: hidden;
	background-color: var(--inspector-input);
}

.output-header {
	display: flex;
	align-items: center;
	gap: 8px;
}

.tool-execution-time {
	font-size: 11px;
	color: var(--inspector-text-dim);
}

/* ── Error Messages ──────────────────────────────────────────────────── */

.tool-error-message {
	padding: 8px 12px;
	color: var(--inspector-error);
	font-size: 13px;
}

.tool-error-message .error-label {
	font-weight: 600;
}

/* ── Content Blocks ──────────────────────────────────────────────────── */

.tool-output-image {
	max-width: 100%;
	border-radius: 4px;
	margin-top: 4px;
}

/* ── History List ────────────────────────────────────────────────────── */

.history-container {
	margin-top: 8px;
}

.history-section {
	margin-top: 4px;
}

.history-section-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 6px 8px;
	font-size: 11px;
	font-weight: 600;
	color: var(--inspector-text-dim);
	text-transform: uppercase;
	letter-spacing: 0.05em;
	border-top: 1px solid var(--inspector-border);
	user-select: none;
}

.history-section-header.clickable {
	cursor: pointer;
	width: 100%;
}

.history-entry {
	border-top: 1px solid var(--inspector-border);
}

.history-entry-error .history-entry-row {
	border-left: 2px solid var(--inspector-error);
}

.history-entry-row {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 4px 8px;
	cursor: pointer;
	user-select: none;
	font-size: 13px;
	transition: background-color 0.1s;
}

.history-entry-row:hover {
	background: var(--inspector-hover);
}

.history-chevron {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 16px;
	flex-shrink: 0;
	color: var(--inspector-text-dim);
}

.history-chevron svg {
	width: 16px;
	height: 16px;
	fill: currentColor;
}

.history-comment-field {
	flex: 1;
	font-size: 13px;
	font-family: var(--font-sans);
	color: var(--inspector-text);
	background: transparent;
	border: 1px solid transparent;
	padding: 1px 4px;
	border-radius: 3px;
	outline: none;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	cursor: text;
	min-width: 0;
}

.history-comment-field:hover {
	border-color: var(--inspector-border);
}

.history-comment-field:focus {
	border-color: var(--inspector-accent);
	background: var(--inspector-input);
}

.history-comment-field::placeholder {
	color: var(--inspector-text-dim);
	font-style: italic;
}

.history-time {
	font-size: 11px;
	color: var(--inspector-text-dim);
	flex-shrink: 0;
}

.history-duration {
	font-size: 11px;
	color: var(--inspector-text-dim);
	flex-shrink: 0;
	min-width: 40px;
	text-align: right;
}

.history-rating-badge {
	font-size: 14px;
	flex-shrink: 0;
	width: 20px;
	text-align: center;
}

.history-row-rating {
	display: flex;
	gap: 2px;
	flex-shrink: 0;
	align-items: center;
}

.history-entry-detail {
	padding: 8px 12px 12px;
	background: var(--inspector-bg);
}

.history-detail-section {
	margin-bottom: 8px;
}

.history-detail-label {
	font-size: 11px;
	font-weight: 600;
	color: var(--inspector-text-dim);
	margin-bottom: 4px;
}

.history-rating-row {
	display: flex;
	gap: 4px;
	margin-bottom: 4px;
}

.history-rating-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 4px;
	border-radius: 5px;
	cursor: pointer;
	background: transparent;
	border: 1px solid transparent;
	color: var(--inspector-text-dim);
	position: relative;
}

.history-rating-btn svg {
	width: 16px;
	height: 16px;
	fill: currentColor;
}

.history-rating-btn:hover {
	color: var(--inspector-text);
	background: var(--inspector-hover);
}

.history-rating-btn.checked,
.history-rating-btn.checked:hover {
	color: var(--vscode-inputOption-activeForeground, #fff) !important;
	border-color: var(--vscode-inputOption-activeBorder, #007acc);
	background-color: var(--vscode-inputOption-activeBackground, rgba(0, 122, 204, 0.3));
}

.hidden {
	display: none !important;
}

/* ── Interactive JSON: Clickable Value Cursors ───────────────────────── */

.json-clickable-value {
	/* values are selected on click, toggled with Tab */
}

/* ── Interactive JSON: Enum Array Toggle ─────────────────────────────── */

.enum-inactive-options {
	color: rgba(150, 150, 150, 0.45) !important;
	font-style: italic;
}

/* ── Monaco Overrides ────────────────────────────────────────────────── */

/* Hide the Monaco suggest widget when empty */
.suggest-widget.empty,
.suggest-widget .suggest-status-bar {
	display: none !important;
}

.monaco-editor .suggest-widget:has(.message:not(:empty)):not(:has(.monaco-list-row)) {
	display: none !important;
}
